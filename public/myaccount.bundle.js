(()=>{var e,t={6562:(e,t,n)=>{window.title="Random Rants + | My account",n(3358),n(8563),n(6313);var a=n(7255),o=n(4592),i=n(8149),r=n(4435),l=n(8099);n(3730),async function(){try{var e=await o.checkSessionCookie();if(e){var t=e.color||"#000000",s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"div",style:{display:"flex"},children:[{element:"img",style:{outline:"none",borderRadius:"64px",borderStyle:"solid",borderWidth:"3px",borderColor:"#7d7d7d",backgroundColor:"#969696",imageRendering:"pixelated",top:"0px",width:"64px",height:"64px"},gid:"profilePicture_account"},{element:"div",style:{display:"flex",flexDirection:"column"},children:[{element:"input",style:{alignContent:"center",fontSize:"30px",fontWeight:"bold",color:t,border:"none",background:"none",fontFamily:e.font,width:"380px"},gid:"displayNameInput",value:e.displayName},{element:"span",style:{alignContent:"center",fontSize:"16px",color:t,padding:"3px 3px",fontFamily:e.font},gid:"usernameSpan",textContent:e.username}]},{element:"div",style:{width:"10px"}},{element:"div",style:{alignContent:"center"},children:[{element:"input",type:"color",value:t,gid:"username_color_input",style:{width:"100%"}},{element:"select",className:"inputText2",gid:"fontInput",style:{width:"100%",fontSize:"10px"},children:[{element:"option",textContent:"Arial",value:"Arial",selected:!0}].concat(l.map(e=>({element:"option",textContent:e.name,value:e.family})))}]}]},{element:"hr"},{element:"span",className:"headerText",textContent:"Your Random Rants + account"},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"changeDisplayNameButton",style:{flexGrow:"1"},children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change display name"}]},{element:"div",className:"button",gid:"changeDisplayNameFontButton",hidden:!0,style:{width:"fit-content"},children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change font"}]}]},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"uploadPFP",style:{flexGrow:"1"},children:[{element:"img",src:"images/profile.svg",style:{height:"17px"}},{element:"span",textContent:"Upload profile picture"}]},{element:"div",className:"button",style:{width:"fit-content"},gid:"resetPFP",children:[{element:"img",src:"images/reload.svg",style:{height:"17px"}},{element:"span",textContent:"Reset"}]}]},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){a.getGPId("username_color_input").click()}}],children:[{element:"img",src:"images/brush.svg",style:{height:"17px"}},{element:"span",textContent:"Change username color"}]},{element:"div",className:"button",gid:"changePasswordButton",children:[{element:"img",src:"images/key.svg",style:{height:"17px"}},{element:"span",textContent:"Change password"}]},{element:"div",className:"button",gid:"signOutButton",children:[{element:"img",src:"images/signout.svg",style:{height:"17px"}},{element:"span",textContent:"Sign out"}]},{element:"br"},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){window.location.href="/chat"}}],children:[{element:"img",src:"images/chaticon.svg",style:{height:"17px"}},{element:"span",textContent:"Start ranting!"}]},{element:"br"},{element:"b",style:{color:"red"},textContent:"Dangerous actions:"},{element:"br"},{element:"div",className:"button",gid:"destroyAccountButton",children:[{element:"img",src:"images/redcancel.svg",style:{height:"17px"}},{element:"span",textContent:"Deactivate account"}]}]}],c=a.createElementsFromJSON(s);a.appendElements(a.body,c);var d=a.getGPId("profilePicture_account"),m=a.getGPId("username_color_input"),u=a.getGPId("fontInput"),h=a.getGPId("usernameSpan"),g=a.getGPId("changeDisplayNameButton"),p=a.getGPId("changeDisplayNameFontButton"),y=a.getGPId("displayNameInput"),f=a.getGPId("changePasswordButton");async function v(t){var n=o.getProfilePictureURL(e.username);try{for(var a=0;a<3;a++)await fetch(n,{cache:"reload",mode:"no-cors"})}catch(e){}d.src=t||n}v(),p.onclick=function(){},a.getGPId("signOutButton").onclick=async function(){var e=r.doLoadingScreen();await o.logoutOfAccount(),window.location.href="/",e.remove()},a.getGPId("uploadPFP").onclick=function(){var e=document.createElement("input");e.accept=".png, .jpeg, .bmp, .jpg, .ico, .webm",e.type="file",e.onchange=function(){var t=e.files[0];if(t){var n=new FileReader;n.onload=async function(){try{try{var e=await(t=n.result,new Promise((e,n)=>{const a=document.createElement("img");a.src=t,a.onload=function(){try{const t=96,n=document.createElement("canvas"),o=n.getContext("2d");let i,r;const l=a.width/a.height;l>1?(i=t,r=t/l):(r=t,i=t*l),n.width=t,n.height=t,o.clearRect(0,0,n.width,n.height);const s=(t-i)/2,c=(t-r)/2;o.drawImage(a,s,c,i,r);const d=n.toDataURL("image/webp",.5);n.width=1,n.height=1,n.remove(),e(d)}catch(e){n("Got strange error when trying to resize image: "+e)}},a.onerror=function(){n("Unable to load this image to compress and resize, maybe your browser doesn't support that format.")}}))}catch(e){return void i.alert("Image resizing and compression hit an error. Try another image?\nTechnical error: "+e)}await fetch(o.getServerURL()+"/account/picture/",{method:"POST",body:e.split(",").pop()}),v(e),i.alert("Profile picture upload success!\nReload all chatrooms to apply the new profile picture.")}catch(e){i.alert(`Couldn't upload your profile picture\nTry doing it again when you're ready.\nTechnical error: ${e}`)}var t},n.readAsDataURL(t)}},e.click()};var w=a.getGPId("resetPFP");w.onclick=async function(){if(w.disabled=!0,await i.confirm("Are you sure to reset your picture? Once its gone, its gone forever!")){try{await fetch(o.getServerURL()+"/account/picture/",{method:"POST",body:""}),v()}catch(e){i.alert("Error deleting profile picture.")}w.disabled=!1}},m.onchange=async function(){t=m.value,y.style.color=t,h.style.color=t,await fetch(o.getServerURL()+"/account/setcolor/",{method:"POST",body:JSON.stringify({color:m.value})})},u.onchange=async function(){y.style.fontFamily=u.value,h.style.fontFamily=u.value,await fetch(o.getServerURL()+"/account/setfont/",{method:"POST",body:JSON.stringify({font:u.value})})},u.value=e.font,g.onclick=async function(){y.focus()},y.style.cursor="pointer",y.onfocus=async function(){y.style.cursor="auto"},y.onblur=async function(){y.style.cursor="pointer"},y.onchange=async function(){y.disabled=!0;var e=y.value;if(!(await fetch(o.getServerURL()+"/account/displayname/",{method:"POST",body:JSON.stringify({displayName:e})})).ok)return i.alert("This name is too goofy or long, make it something shorter."),void(y.disabled=!1);y.value=e,y.disabled=!1},f.onclick=async function(){if(f.disabled=!0,await i.confirm("Change your password? Its no way back if you forget it!")){var e=await i.passwordPrompt("Type your old password, just to confirm its you.");if(!e)return void i.alert("Password change canceled, nothing has been changed.");var t=await i.passwordPrompt("Make a new password, make sure its unique to other sites you use.");if(!t)return void i.alert("Password change canceled, nothing has been changed.");var n=r.doLoadingScreen(),a=await fetch(o.getServerURL()+"/account/passwordchange/",{method:"POST",body:JSON.stringify({newPassword:t,oldPassword:e})});if(n.remove(),!a.ok)return void i.alert("Something went wrong while changing your password. Maybe try again?");i.alert("Password was changed! All other devices have been signed out until you change the password back again.")}f.disabled=!1};var b=a.getGPId("destroyAccountButton");b.onclick=async function(){b.setAttribute("disabled","");try{if(!await i.confirm("Deactivating your account will:\n- Make your account no longer accessible.\n- You or someone else can't sign up with the same username.\n- Rooms you own won't be deleted, they can still be accessed.\n- Your profile picture and some info would be deleted to save database space.\n- People that try to refrence your username would get an error.\nDeactivate your account now? You can't undo this action!"))return i.alert("Deactivation canceled."),void b.removeAttribute("disabled");var e=await i.passwordPrompt("To make sure its actually you, enter your password:");if(!e)return void i.alert("Deactivation canceled.");var t=await fetch(o.getServerURL()+"/account/destroy/",{method:"POST",body:JSON.stringify({password:e})});if(!t.ok)return void i.alert("Deactivation had an error. Error: "+(await t.json()).message);i.alert("Your account was successfully deactivated!"),window.location.href="/"}catch(e){console.error(e),i.alert("Error when trying to destroy account: "+e)}b.removeAttribute("disabled")}}else s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"span",className:"headerText",textContent:"Oops!"},{element:"br"},{element:"span",textContent:"It doesn't seem like you're signed in, this might have been because your user information changed on another device or browser. You can sign in again to make this error go away."},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signin?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign in"},{element:"div",style:{width:"3px"}},{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signup?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign up"}]}]}],c=a.createElementsFromJSON(s),a.appendElements(a.body,c)}catch(x){i.alert(x)}}()},8099:e=>{e.exports=[{name:"Beach Day",family:"BeachDay"},{name:"Child Hood",family:"ChildHood"},{name:"Mochibop",family:"Mochibop"},{name:"SNESS",family:"SNESS"},{name:"I Hate Comic Sans",family:"IHateComicSans"},{name:"Ugly Handwriting",family:"UglyHandwriting"},{name:"Pops",family:"Pops"},{name:"Callisburg",family:"Callisburg"},{name:"Pxl",family:"Pxl"},{name:"Blocky Best",family:"BlockyBest"},{name:"Baiser",family:"Baiser"},{name:"Block Craft",family:"BlockCraft"},{name:"The Bomb Sound",family:"TheBombSound"},{name:"The Cursive Font",family:"TheCursiveFont"},{name:"Allicia Personal Use",family:"AlliciaPersonalUse"},{name:"Jolly cheer",family:"JollyCheer"}]}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,o,i)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,o,i]=e[d],l=!0,s=0;s<n.length;s++)(!1&i||r>=i)&&Object.keys(a.O).every(e=>a.O[e](n[s]))?n.splice(s--,1):(l=!1,i<r&&(r=i));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={930:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[r,l,s]=n,c=0;if(r.some(t=>0!==e[t])){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(s)var d=s(a)}for(t&&t(n);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self.webpackChunkrandomrants_plus=self.webpackChunkrandomrants_plus||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=a.O(void 0,[804],()=>a(6562));o=a.O(o)})();