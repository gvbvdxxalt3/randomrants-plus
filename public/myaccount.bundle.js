(()=>{var e,t={1675:(e,t,n)=>{var o=n(7255),l=n(4948),{hslToRgb:r,rgbToHsl:a,rgbToHex:i,hexToRgb:c,hexToHsl:s,hslToHex:d,getRainbowHexes:u}=n(1527),h={ask:function(){return new Promise((e,t)=>{var n=function(){},i=(o.appendElementsFromJSON(document.body,[{element:"div",className:"colorSelectDialog",gid:"colorSelectDialog",children:[{element:"style",innerHTML:l},{element:"div",className:"colorSelectDialogBackground"},{element:"div",className:"colorSelectDialogBox",children:[{element:"span",className:"colorSelectHeader",textContent:"Choose a color"},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"colorSelectPreviewBox",gid:"colorSelectPreview",textContent:"Preview"},{element:"div",style:{display:"block"},children:[{element:"button",className:"colorSelectButton",textContent:"Normal",eventListeners:[{event:"click",func:function(){o.getGPId("colorSelectHSL").hidden=!0,o.getGPId("colorSelectRGB").hidden=!0,o.getGPId("colorSelectCursor").hidden=!1}}]},{element:"button",className:"colorSelectButton",textContent:"HSL",eventListeners:[{event:"click",func:function(){o.getGPId("colorSelectHSL").hidden=!1,o.getGPId("colorSelectRGB").hidden=!0,o.getGPId("colorSelectCursor").hidden=!0}}]},{element:"button",className:"colorSelectButton",textContent:"RGB",eventListeners:[{event:"click",func:function(){o.getGPId("colorSelectHSL").hidden=!0,o.getGPId("colorSelectRGB").hidden=!1,o.getGPId("colorSelectCursor").hidden=!0}}]},{element:"br"},{element:"div",gid:"colorSelectHSL",hidden:!0,children:[{element:"span",className:"colorSelectLabel",textContent:"Hue: "},{element:"input",gid:"colorSelectHueInput",type:"range",min:0,max:360,value:0},{element:"br"},{element:"span",className:"colorSelectLabel",textContent:"Saturation: "},{element:"input",gid:"colorSelectSaturationInput",type:"range",min:0,max:100,value:100},{element:"br"},{element:"span",className:"colorSelectLabel",textContent:"Lightness: "},{element:"input",gid:"colorSelectLightnessInput",type:"range",min:0,max:100,value:50}]},{element:"div",gid:"colorSelectRGB",hidden:!0,children:[{element:"span",className:"colorSelectLabel",textContent:"Red: "},{element:"input",gid:"colorSelectRedInput",type:"range",min:0,max:255,value:0},{element:"br"},{element:"span",className:"colorSelectLabel",textContent:"Green: "},{element:"input",gid:"colorSelectGreenInput",type:"range",min:0,max:255,value:0},{element:"br"},{element:"span",className:"colorSelectLabel",textContent:"Blue: "},{element:"input",gid:"colorSelectBlueInput",type:"range",min:0,max:255,value:0}]},{element:"div",gid:"colorSelectCursor",children:[{element:"div",style:{display:"flex"},children:[{element:"div",style:{width:"125px",height:"fit-content",marginRight:"10px"},children:[{element:"div",className:"colorSelectDropContainer",children:[{element:"div",className:"colorSelectDrop",gid:"colorSelectDrop"}]},{element:"canvas",width:"125",height:"125",gid:"colorSelectCursorCanvas",className:"colorSelectCursorCanvas"},{element:"br"},{element:"span",style:{width:"125px",fontSize:"12px"},textContent:"Click in the square to choose a color."}]},{element:"div",children:[{element:"span",className:"colorSelectLabel",textContent:"Hue: "},{element:"input",gid:"colorSelectHueInput2",type:"range",min:0,max:360,value:0}]}]},{element:"br"}]}]}]},{element:"span",className:"colorSelectLabel",textContent:"Hex: "},{element:"input",type:"text",className:"colorSelectTextInput",gid:"colorSelectInput",value:"#ffffff"},{element:"br"},{element:"div",className:"colorSelectPickRainbowContainer",children:u(20).map(e=>({element:"div",className:"colorSelectColorDiv",style:{background:e},backgroundHex:e,eventListeners:[{event:"click",func:function(){n(this)}}]}))},{element:"br"},{element:"button",className:"colorSelectButton",textContent:"OK",gid:"colorSelectOkButton"},{element:"button",className:"colorSelectButton",textContent:"Cancel",gid:"colorSelectCancelButton"}]}]}])[0],o.getGPId("colorSelectPreview")),c=o.getGPId("colorSelectHueInput"),h=o.getGPId("colorSelectHueInput2"),m=o.getGPId("colorSelectSaturationInput"),p=o.getGPId("colorSelectLightnessInput"),g=o.getGPId("colorSelectRedInput"),v=o.getGPId("colorSelectGreenInput"),f=o.getGPId("colorSelectBlueInput"),x=o.getGPId("colorSelectDrop"),y=o.getGPId("colorSelectCursorCanvas"),b=y.getContext("2d"),w=o.getGPId("colorSelectInput"),S={h:0,s:0,l:0};function C(e,t,n,o,l){return{h:e,s:t/o*100,l:100+n/l*-100}}function P(e){S={h:+c.value,s:+m.value,l:+p.value};var t,n,o,l,a=r(S.h,S.s,S.l),s=d(S.h,S.s,S.l);i.style.backgroundColor=s,w.value=s,g.value=a.r,v.value=a.g,f.value=a.b,h.value=c.value,function(){for(var e=0,t=0,n=S.h;t<y.height;){for(e=0;e<y.width;){var o=C(n,e,t,y.width,y.height);b.fillStyle=d(o.h,o.s,o.l),b.fillRect(e,t,2,2),e+=2}t+=2}}(),t=S.s,n=S.l,o={x:t/100*y.width,y:(1-n/100)*y.height},l=N(),x.style.backgroundColor=l,x.style.left=o.x+"px",x.style.top=o.y+"px"}function k(){var e=a(+g.value,+v.value,+f.value);c.value=e.h,m.value=e.s,p.value=e.l,h.value=e.h,P()}function I(e,t,n){c.value=e,m.value=t,p.value=n,P()}function N(){return d(S.h,S.s,S.l)}function L(e,t){var n=Math.max(0,Math.min(y.width,e)),o=Math.max(0,Math.min(y.height,t)),l=C(S.h,n,o,y.width,y.height);c.value=l.h,m.value=l.s,p.value=l.l,P()}P(),c.addEventListener("input",P),h.addEventListener("input",function(){c.value=h.value,P()}),m.addEventListener("input",P),p.addEventListener("input",P),g.addEventListener("input",k),v.addEventListener("input",k),f.addEventListener("input",k),y.addEventListener("click",function(e){L(e.offsetX,e.offsetY),e.preventDefault()}),y.addEventListener("touchmove",function(e){var t=y.getBoundingClientRect(),n=e.touches[0].clientX,o=e.touches[0].clientY;L(n-t.x,o-t.y),e.preventDefault()});var G=!1;y.addEventListener("mousedown",function(e){G=!0,L(e.offsetX,e.offsetY),e.preventDefault()}),y.addEventListener("mousemove",function(e){G&&(L(e.offsetX,e.offsetY),e.preventDefault())});var R=o.getGPId("colorSelectDialog");R.addEventListener("mouseup",function(e){G=!1,e.preventDefault()}),w.addEventListener("change",()=>{var e=s(w.value);I(e.h,e.s,e.l)}),n=function(e){try{var t=s(e.getAttribute("backgroundHex"));I(t.h,t.s,t.l)}catch(e){window.alert(e)}};var D=o.getGPId("colorSelectOkButton"),B=o.getGPId("colorSelectCancelButton");D.addEventListener("click",()=>{R.remove(),e(N())}),B.addEventListener("click",()=>{R.remove(),e(null)})})}};e.exports=h},4948:e=>{e.exports=".colorSelectDialog {\n  z-index: 99999999999;\n  position: fixed;\n  font-family: Arial;\n}\n.colorSelectDialogBackground {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: black;\n  opacity: 0.5;\n}\n.colorSelectDialogBox {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  width: calc(100% - 200px);\n  max-width: fit-content;\n  max-height: fit-content;\n  height: calc(100vh - 50px);\n  background: white;\n  padding: 10px 10px;\n  border-radius: 5px;\n  color: black;\n  transform: translate(-50%, -50%);\n  min-width: 200px;\n  min-height: 200px;\n  overflow: scroll;\n}\n\n.colorSelectHeader {\n  font-size: 35px;\n  font-weight: bold;\n}\n\n.colorSelectLabel {\n  font-weight: bold;\n}\n\n.colorSelectPreviewBox {\n  width: 170px;\n  height: 170px;\n  border-radius: 4px;\n  color: white;\n  line-height: 170px;\n  text-align: center;\n  font-weight: bold;\n}\n\n.colorSelectColorDiv {\n  width: 32px;\n  height: 32px;\n  flex-grow: 0;\n  border-radius: 4px;\n  color: red;\n  border-color: black;\n  border-style: solid;\n  border-width: 2px;\n}\n.colorSelectColorDiv:hover {\n  filter: brightness(1.2);\n  border-color: gray;\n  cursor: pointer;\n}\n.colorSelectColorDiv:active {\n  border-color: white;\n}\n\n.colorSelectPickRainbowContainer {\n  width: 500px;\n  height: fit-content;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n\n.colorSelectPickRainbowContainer2 {\n  width: 500px;\n  height: fit-content;\n  overflow: auto;\n}\n\n.colorSelectButton {\n  all: unset;\n  background: #006eff;\n  border-radius: 4px;\n  padding: 3px 3px;\n  font-weight: bold;\n  color: white;\n  margin: 2px 2px;\n}\n\n.colorSelectButton:hover {\n  background: #5ca3ff;\n  cursor: pointer;\n}\n\n.colorSelectCursorCanvas {\n  image-rendering: pixelated;\n  border-style: solid;\n  border-width: 1px;\n  border-color: gray;\n  cursor: crosshair;\n  width: 125px;\n  height: 125px;\n}\n\n.colorSelectDropContainer {\n  width: 125px;\n  height: 125px;\n  position: absolute;\n  border-style: solid;\n  border-width: 1px;\n  border-color: gray;\n  pointer-events: none;\n}\n.colorSelectDrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  border: 2px solid white;\n  border-radius: 50%;\n  box-shadow:\n    0 0 0 1.5px black,\n    inset 0 0 0 1.5px black;\n  transform: translate(-50%, -50%);\n  background-color: red;\n  width: 10px;\n  height: 10px;\n}\n\n.colorSelectTextInput {\n  all: unset;\n  background: white;\n  border-style: solid;\n  border-width: 1.5px;\n  border-color: gray;\n  width: fit-content;\n  height: fit-content;\n  border-radius: 2px;\n}\n"},6562:(e,t,n)=>{window.title="Random Rants + | My account",n(3358),n(8563),n(6313);var o=n(7255),l=n(4592),r=n(8149),a=n(4435),i=n(8099),c=n(1675);n(3730),async function(){try{var e=await l.checkSessionCookie();if(e){var t=e.color||"#000000",s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black",maxHeight:"calc(100vh - 100px)",maxWidth:"calc(100vw - 100px)",overflowY:"auto"},children:[n(7984),{element:"span",style:{fontSize:"20px",fontWeight:"bold"},textContent:"Your Random Rants + account"},{element:"hr"},{element:"div",style:{display:"flex"},children:[{element:"img",style:{outline:"none",borderRadius:"64px",borderStyle:"solid",borderWidth:"3px",borderColor:"#7d7d7d",backgroundColor:"#969696",imageRendering:"pixelated",top:"0px",width:"64px",height:"64px"},gid:"profilePicture_account"},{element:"div",style:{display:"flex",flexDirection:"column"},children:[{element:"input",style:{alignContent:"center",fontSize:"30px",fontWeight:"bold",color:t,border:"none",background:"none",fontFamily:e.font,width:"100%"},gid:"displayNameInput",value:e.displayName},{element:"span",style:{alignContent:"center",fontSize:"16px",color:t,padding:"3px 3px",fontFamily:e.font},gid:"usernameSpan",textContent:e.username}]},{element:"div",style:{width:"10px"}},{element:"div",style:{alignContent:"center"},children:[{element:"div",style:{display:"flex",justifyContent:"center"},children:[{element:"span",style:{marginRight:"3px"},textContent:"Font: "},{element:"select",className:"inputText2",gid:"fontInput",style:{width:"100%",fontSize:"10px",minWidth:"50px"},children:[{element:"optgroup",label:"Browser Fonts",children:[{element:"option",textContent:"Arial (Default)",value:"Arial",selected:!0},{element:"option",textContent:"Monospace",value:"monospace",selected:!0}]},{element:"optgroup",label:"Additional Fonts",children:i.map(e=>({element:"option",textContent:e.name,value:e.family}))}]}]}]}]},{element:"hr"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"changeDisplayNameButton",style:{flexGrow:"1"},children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change display name"}]},{element:"div",className:"button",gid:"changeDisplayNameFontButton",hidden:!0,style:{width:"fit-content"},children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change font"}]}]},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"uploadPFP",style:{flexGrow:"1"},children:[{element:"img",src:"images/profile.svg",style:{height:"17px"}},{element:"span",textContent:"Upload profile picture"}]},{element:"div",className:"button",style:{width:"fit-content"},gid:"resetPFP",children:[{element:"img",src:"images/reload.svg",style:{height:"17px"}},{element:"span",textContent:"Reset"}]}]},{element:"div",className:"button",gid:"selectUsernameColorButton",children:[{element:"img",src:"images/brush.svg",style:{height:"17px"}},{element:"span",textContent:"Change username color"}]},{element:"div",className:"button",gid:"changePasswordButton",children:[{element:"img",src:"images/key.svg",style:{height:"17px"}},{element:"span",textContent:"Change password"}]},{element:"div",className:"button",gid:"signOutButton",children:[{element:"img",src:"images/signout.svg",style:{height:"17px"}},{element:"span",textContent:"Sign out"}]},{element:"br"},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){window.location.href="/chat"}}],children:[{element:"img",src:"images/chaticon.svg",style:{height:"17px"}},{element:"span",textContent:"Start ranting!"}]},{element:"br"},{element:"b",style:{color:"red"},textContent:"Dangerous actions:"},{element:"br"},{element:"div",className:"button",gid:"destroyAccountButton",children:[{element:"img",src:"images/redcancel.svg",style:{height:"17px"}},{element:"span",textContent:"Deactivate account"}]}]}],d=o.createElementsFromJSON(s);o.appendElements(o.body,d);var u=o.getGPId("profilePicture_account"),h=o.getGPId("selectUsernameColorButton"),m=o.getGPId("fontInput"),p=o.getGPId("usernameSpan"),g=o.getGPId("changeDisplayNameButton"),v=o.getGPId("changeDisplayNameFontButton"),f=o.getGPId("displayNameInput"),x=o.getGPId("changePasswordButton");async function y(t){var n=l.getProfilePictureURL(e.username);try{for(var o=0;o<3;o++)await fetch(n,{cache:"reload",mode:"no-cors"})}catch(e){}u.src=t||n}y(),v.onclick=function(){},o.getGPId("signOutButton").onclick=async function(){var e=a.doLoadingScreen();await l.logoutOfAccount(),window.location.href="/",e.remove()},o.getGPId("uploadPFP").onclick=function(){var e=document.createElement("input");e.accept=".png, .jpeg, .bmp, .jpg, .ico, .webm, .webp",e.type="file",e.onchange=function(){var t=e.files[0];if(t){var n=new FileReader;n.onload=async function(){try{try{var e=await(t=n.result,new Promise((e,n)=>{const o=document.createElement("img");o.src=t,o.onload=function(){try{const t=96,n=document.createElement("canvas"),l=n.getContext("2d");let r,a;const i=o.width/o.height;i>1?(r=t,a=t/i):(a=t,r=t*i),n.width=t,n.height=t,l.clearRect(0,0,n.width,n.height);const c=(t-r)/2,s=(t-a)/2;l.drawImage(o,c,s,r,a);const d=n.toDataURL("image/webp",.5);n.width=1,n.height=1,n.remove(),e(d)}catch(e){n("Got strange error when trying to resize image: "+e)}},o.onerror=function(){n("Unable to load this image to compress and resize, maybe your browser doesn't support that format.")}}))}catch(e){return void r.alert("Image resizing and compression hit an error. Try another image?\nTechnical error: "+e)}await fetch(l.getServerURL()+"/account/picture/",{method:"POST",body:e.split(",").pop()}),y(e),r.alert("Profile picture upload success!\nReload all chatrooms to apply the new profile picture.")}catch(e){r.alert(`Couldn't upload your profile picture\nTry doing it again when you're ready.\nTechnical error: ${e}`)}var t},n.readAsDataURL(t)}},e.click()};var b=o.getGPId("resetPFP");b.onclick=async function(){if(b.disabled=!0,await r.confirm("Are you sure to reset your picture? Once its gone, its gone forever!")){try{await fetch(l.getServerURL()+"/account/picture/",{method:"POST",body:""}),y()}catch(e){r.alert("Error deleting profile picture.")}b.disabled=!1}},h.addEventListener("click",async function(){var e=await c.ask();e&&await async function(e){t=e,f.style.color=e,p.style.color=e,await fetch(l.getServerURL()+"/account/setcolor/",{method:"POST",body:JSON.stringify({color:e})})}(e)}),m.onchange=async function(){f.style.fontFamily=m.value,p.style.fontFamily=m.value,await fetch(l.getServerURL()+"/account/setfont/",{method:"POST",body:JSON.stringify({font:m.value})})},m.value=e.font,g.onclick=async function(){f.focus()},f.style.cursor="pointer",f.onfocus=async function(){f.style.cursor="auto"},f.onblur=async function(){f.style.cursor="pointer"},f.onchange=async function(){f.disabled=!0;var e=f.value;if(!(await fetch(l.getServerURL()+"/account/displayname/",{method:"POST",body:JSON.stringify({displayName:e})})).ok)return r.alert("This name is too goofy or long, make it something shorter."),void(f.disabled=!1);f.value=e,f.disabled=!1},x.onclick=async function(){if(x.disabled=!0,await r.confirm("Change your password? Its no way back if you forget it!")){var e=await r.passwordPrompt("Type your old password, just to confirm its you.");if(!e)return void r.alert("Password change canceled, nothing has been changed.");var t=await r.passwordPrompt("Make a new password, make sure its unique to other sites you use.");if(!t)return void r.alert("Password change canceled, nothing has been changed.");var n=a.doLoadingScreen(),o=await fetch(l.getServerURL()+"/account/passwordchange/",{method:"POST",body:JSON.stringify({newPassword:t,oldPassword:e})});if(n.remove(),!o.ok)return void r.alert("Something went wrong while changing your password. Maybe try again?");r.alert("Password was changed! All other devices have been signed out until you change the password back again.")}x.disabled=!1};var w=o.getGPId("destroyAccountButton");w.onclick=async function(){w.setAttribute("disabled","");try{if(!await r.confirm("Deactivating your account will:\n- Make your account no longer accessible.\n- You or someone else can't sign up with the same username.\n- Rooms you own won't be deleted, they can still be accessed.\n- Your profile picture and some info would be deleted to save database space.\n- People that try to refrence your username would get an error.\nDeactivate your account now? You can't undo this action!"))return r.alert("Deactivation canceled."),void w.removeAttribute("disabled");var e=await r.passwordPrompt("To make sure its actually you, enter your password:");if(!e)return void r.alert("Deactivation canceled.");var t=await fetch(l.getServerURL()+"/account/destroy/",{method:"POST",body:JSON.stringify({password:e})});if(!t.ok)return void r.alert("Deactivation had an error. Error: "+(await t.json()).message);r.alert("Your account was successfully deactivated!"),window.location.href="/"}catch(e){console.error(e),r.alert("Error when trying to destroy account: "+e)}w.removeAttribute("disabled")}}else s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"span",className:"headerText",textContent:"Oops!"},{element:"br"},{element:"span",textContent:"It doesn't seem like you're signed in, this might have been because your user information changed on another device or browser. You can sign in again to make this error go away."},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signin?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign in"},{element:"div",style:{width:"3px"}},{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signup?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign up"}]}]}],d=o.createElementsFromJSON(s),o.appendElements(o.body,d)}catch(S){r.alert(S)}}()}},n={};function o(e){var l=n[e];if(void 0!==l)return l.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,l,r)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,l,r]=e[d],i=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every(e=>o.O[e](n[c]))?n.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(d--,1);var s=l();void 0!==s&&(t=s)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,l,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={930:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var l,r,[a,i,c]=n,s=0;if(a.some(t=>0!==e[t])){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(c)var d=c(o)}for(t&&t(n);s<a.length;s++)r=a[s],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},n=self.webpackChunkrandomrants_plus=self.webpackChunkrandomrants_plus||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=o.O(void 0,[804],()=>o(6562));l=o.O(l)})();