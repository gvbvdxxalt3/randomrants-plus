(()=>{var e,t={6562:(e,t,n)=>{n(3358),n(8563),n(6313);var o=n(7255),a=n(4592),r=n(8149),i=n(4435);n(730),async function(){try{var e=await a.checkSessionCookie();if(e){var t=e.color||"#000000",s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"div",style:{display:"flex"},children:[{element:"img",style:{outline:"none",borderRadius:"64px",borderStyle:"solid",borderWidth:"3px",borderColor:"#7d7d7d",backgroundColor:"#969696",imageRendering:"pixelated",top:"0px",width:"64px",height:"64px"},gid:"profilePicture_account"},{element:"div",style:{display:"flex",flexDirection:"column"},children:[{element:"input",style:{alignContent:"center",fontSize:"30px",fontWeight:"bold",color:t,border:"none",background:"none"},gid:"displayNameInput",value:e.displayName},{element:"span",style:{alignContent:"center",fontSize:"16px",color:t,padding:"3px 3px"},gid:"usernameSpan",textContent:e.username}]},{element:"div",style:{width:"10px"}},{element:"div",style:{alignContent:"center"},title:"Click this to change your usernames color, appears in chat as well!",children:[{element:"input",type:"color",value:t,gid:"username_color_input"}]}]},{element:"hr"},{element:"span",className:"headerText",textContent:"Your Random Rants + account"},{element:"br"},{element:"div",className:"button",gid:"changeDisplayNameButton",children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change display name"}]},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"uploadPFP",style:{flexGrow:"1"},children:[{element:"img",src:"images/profile.svg",style:{height:"17px"}},{element:"span",textContent:"Upload profile picture"}]},{element:"div",className:"button",style:{width:"fit-content"},gid:"resetPFP",children:[{element:"img",src:"images/reload.svg",style:{height:"17px"}},{element:"span",textContent:"Reset"}]}]},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){o.getGPId("username_color_input").click()}}],children:[{element:"img",src:"images/brush.svg",style:{height:"17px"}},{element:"span",textContent:"Change username color"}]},{element:"div",className:"button",gid:"changePasswordButton",children:[{element:"img",src:"images/key.svg",style:{height:"17px"}},{element:"span",textContent:"Change password"}]},{element:"div",className:"button",gid:"signOutButton",children:[{element:"img",src:"images/signout.svg",style:{height:"17px"}},{element:"span",textContent:"Sign out"}]},{element:"br"},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){window.location.href="/chat"}}],children:[{element:"img",src:"images/chaticon.svg",style:{height:"17px"}},{element:"span",textContent:"Start chatting"}]}]}],c=o.createElementsFromJSON(s);o.appendElements(o.body,c);var l=o.getGPId("profilePicture_account"),d=o.getGPId("username_color_input"),u=o.getGPId("usernameSpan"),g=o.getGPId("changeDisplayNameButton"),m=o.getGPId("displayNameInput"),h=o.getGPId("changePasswordButton");async function p(t){var n=a.getProfilePictureURL(e.username);try{for(var o=0;o<3;o++)await fetch(n,{cache:"reload",mode:"no-cors"})}catch(e){}l.src=t||n}p(),o.getGPId("signOutButton").onclick=async function(){var e=i.doLoadingScreen();await a.logoutOfAccount(),window.location.href="/",e.remove()},o.getGPId("uploadPFP").onclick=function(){var e=document.createElement("input");e.accept=".png, .jpeg, .bmp, .jpg, .ico, .webm",e.type="file",e.onchange=function(){var t=e.files[0];if(t){var n=new FileReader;n.onload=async function(){try{try{var e=await(t=n.result,new Promise((e,n)=>{const o=document.createElement("img");o.src=t,o.onload=function(){try{const t=96,n=document.createElement("canvas"),a=n.getContext("2d");let r,i;const s=o.width/o.height;s>1?(r=t,i=t/s):(i=t,r=t*s),n.width=t,n.height=t,a.clearRect(0,0,n.width,n.height);const c=(t-r)/2,l=(t-i)/2;a.drawImage(o,c,l,r,i);const d=n.toDataURL("image/webp",.5);n.width=1,n.height=1,n.remove(),e(d)}catch(e){n("Got strange error when trying to resize image: "+e)}},o.onerror=function(){n("Unable to load this image to compress and resize, maybe your browser doesn't support that format.")}}))}catch(e){return void r.alert("Image resizing and compression hit an error. Try another image?\nTechnical error: "+e)}await fetch(a.getServerURL()+"/account/picture/",{method:"POST",body:e.split(",").pop()}),p(e)}catch(e){r.alert(`Couldn't upload your profile picture\nTry doing it again when you're ready.\nTechnical error: ${e}`)}var t},n.readAsDataURL(t)}},e.click()};var y=o.getGPId("resetPFP");y.onclick=async function(){if(y.disabled=!0,await r.confirm("Are you sure to reset your picture? Once its gone, its gone forever!")){try{await fetch(a.getServerURL()+"/account/picture/",{method:"POST",body:""}),p()}catch(e){r.alert("Error deleting profile picture.")}y.disabled=!1}},d.onchange=async function(){t=d.value,m.style.color=t,u.style.color=t,await fetch(a.getServerURL()+"/account/setcolor/",{method:"POST",body:JSON.stringify({color:d.value})})},g.onclick=async function(){m.focus()},m.style.cursor="pointer",m.onfocus=async function(){m.style.cursor="auto"},m.onblur=async function(){m.style.cursor="pointer"},m.onchange=async function(){m.disabled=!0;var e=m.value;if(!(await fetch(a.getServerURL()+"/account/displayname/",{method:"POST",body:JSON.stringify({displayName:e})})).ok)return r.alert("This name is too goofy or long, make it something shorter."),void(m.disabled=!1);m.value=e,m.disabled=!1},h.onclick=async function(){if(h.disabled=!0,await r.confirm("Change your password? Its no way back if you forget it!")){var e=await r.passwordPrompt("Type your old password, just to confirm its you.");if(!e)return void r.alert("Password change canceled, nothing has been changed.");var t=await r.passwordPrompt("Make a new password, make sure its unique to other sites you use.");if(!t)return void r.alert("Password change canceled, nothing has been changed.");var n=i.doLoadingScreen(),o=await fetch(a.getServerURL()+"/account/passwordchange/",{method:"POST",body:JSON.stringify({newPassword:t,oldPassword:e})});if(n.remove(),!o.ok)return void r.alert("Something went wrong while changing your password. Maybe try again?");r.alert("Password was changed! All other devices have been signed out until you change the password back again.")}h.disabled=!1}}else s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"span",className:"headerText",textContent:"Oops!"},{element:"br"},{element:"span",textContent:"It doesn't seem like you're signed in, this might have been because your user information changed on another device or browser. You can sign in again to make this error go away."},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signin?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign in"},{element:"div",style:{width:"3px"}},{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signup?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign up"}]}]}],c=o.createElementsFromJSON(s),o.appendElements(o.body,c)}catch(f){r.alert(f)}}()}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,a,r)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,a,r]=e[d],s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(o.O).every(e=>o.O[e](n[c]))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={930:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[i,s,c]=n,l=0;if(i.some(t=>0!==e[t])){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(c)var d=c(o)}for(t&&t(n);l<i.length;l++)r=i[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},n=self.webpackChunkrandomrants_plus=self.webpackChunkrandomrants_plus||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[804],()=>o(6562));a=o.O(a)})();