(()=>{var e,t={6562:(e,t,n)=>{window.title="Random Rants + | My account",n(3358),n(8563),n(6313);var o=n(7255),a=n(4592),i=n(8149),r=n(4435);n(3730),async function(){try{var e=await a.checkSessionCookie();if(e){var t=e.color||"#000000",s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"div",style:{display:"flex"},children:[{element:"img",style:{outline:"none",borderRadius:"64px",borderStyle:"solid",borderWidth:"3px",borderColor:"#7d7d7d",backgroundColor:"#969696",imageRendering:"pixelated",top:"0px",width:"64px",height:"64px"},gid:"profilePicture_account"},{element:"div",style:{display:"flex",flexDirection:"column"},children:[{element:"input",style:{alignContent:"center",fontSize:"30px",fontWeight:"bold",color:t,border:"none",background:"none",fontFamily:e.font,width:"380px"},gid:"displayNameInput",value:e.displayName},{element:"span",style:{alignContent:"center",fontSize:"16px",color:t,padding:"3px 3px",fontFamily:e.font},gid:"usernameSpan",textContent:e.username}]},{element:"div",style:{width:"10px"}},{element:"div",style:{alignContent:"center"},children:[{element:"input",type:"color",value:t,gid:"username_color_input",style:{width:"100%"}},{element:"select",className:"inputText1",gid:"fontInput",style:{width:"100%",fontSize:"10px"},children:[{element:"option",textContent:"Arial",value:"Arial",selected:!0},{element:"option",textContent:"Beach Day",value:"BeachDay"},{element:"option",textContent:"Child Hood",value:"ChildHood"},{element:"option",textContent:"Mochibop",value:"Mochibop"},{element:"option",textContent:"SNESS",value:"SNESS"}]}]}]},{element:"hr"},{element:"span",className:"headerText",textContent:"Your Random Rants + account"},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"changeDisplayNameButton",style:{flexGrow:"1"},children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change display name"}]},{element:"div",className:"button",gid:"changeDisplayNameFontButton",hidden:!0,style:{width:"fit-content"},children:[{element:"img",src:"images/text.svg",style:{height:"17px"}},{element:"span",textContent:"Change font"}]}]},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button",gid:"uploadPFP",style:{flexGrow:"1"},children:[{element:"img",src:"images/profile.svg",style:{height:"17px"}},{element:"span",textContent:"Upload profile picture"}]},{element:"div",className:"button",style:{width:"fit-content"},gid:"resetPFP",children:[{element:"img",src:"images/reload.svg",style:{height:"17px"}},{element:"span",textContent:"Reset"}]}]},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){o.getGPId("username_color_input").click()}}],children:[{element:"img",src:"images/brush.svg",style:{height:"17px"}},{element:"span",textContent:"Change username color"}]},{element:"div",className:"button",gid:"changePasswordButton",children:[{element:"img",src:"images/key.svg",style:{height:"17px"}},{element:"span",textContent:"Change password"}]},{element:"div",className:"button",gid:"signOutButton",children:[{element:"img",src:"images/signout.svg",style:{height:"17px"}},{element:"span",textContent:"Sign out"}]},{element:"br"},{element:"div",className:"button",eventListeners:[{event:"click",func:function(){window.location.href="/chat"}}],children:[{element:"img",src:"images/chaticon.svg",style:{height:"17px"}},{element:"span",textContent:"Start ranting!"}]},{element:"br"},{element:"b",style:{color:"red"},textContent:"Dangerous actions:"},{element:"br"},{element:"div",className:"button",gid:"destroyAccountButton",children:[{element:"img",src:"images/redcancel.svg",style:{height:"17px"}},{element:"span",textContent:"Deactivate account"}]}]}],l=o.createElementsFromJSON(s);o.appendElements(o.body,l);var c=o.getGPId("profilePicture_account"),d=o.getGPId("username_color_input"),u=o.getGPId("fontInput"),m=o.getGPId("usernameSpan"),h=o.getGPId("changeDisplayNameButton"),g=o.getGPId("changeDisplayNameFontButton"),p=o.getGPId("displayNameInput"),y=o.getGPId("changePasswordButton");async function f(t){var n=a.getProfilePictureURL(e.username);try{for(var o=0;o<3;o++)await fetch(n,{cache:"reload",mode:"no-cors"})}catch(e){}c.src=t||n}f(),g.onclick=function(){},o.getGPId("signOutButton").onclick=async function(){var e=r.doLoadingScreen();await a.logoutOfAccount(),window.location.href="/",e.remove()},o.getGPId("uploadPFP").onclick=function(){var e=document.createElement("input");e.accept=".png, .jpeg, .bmp, .jpg, .ico, .webm",e.type="file",e.onchange=function(){var t=e.files[0];if(t){var n=new FileReader;n.onload=async function(){try{try{var e=await(t=n.result,new Promise((e,n)=>{const o=document.createElement("img");o.src=t,o.onload=function(){try{const t=96,n=document.createElement("canvas"),a=n.getContext("2d");let i,r;const s=o.width/o.height;s>1?(i=t,r=t/s):(r=t,i=t*s),n.width=t,n.height=t,a.clearRect(0,0,n.width,n.height);const l=(t-i)/2,c=(t-r)/2;a.drawImage(o,l,c,i,r);const d=n.toDataURL("image/webp",.5);n.width=1,n.height=1,n.remove(),e(d)}catch(e){n("Got strange error when trying to resize image: "+e)}},o.onerror=function(){n("Unable to load this image to compress and resize, maybe your browser doesn't support that format.")}}))}catch(e){return void i.alert("Image resizing and compression hit an error. Try another image?\nTechnical error: "+e)}await fetch(a.getServerURL()+"/account/picture/",{method:"POST",body:e.split(",").pop()}),f(e),i.alert("Profile picture upload success!\nReload all chatrooms to apply the new profile picture.")}catch(e){i.alert(`Couldn't upload your profile picture\nTry doing it again when you're ready.\nTechnical error: ${e}`)}var t},n.readAsDataURL(t)}},e.click()};var v=o.getGPId("resetPFP");v.onclick=async function(){if(v.disabled=!0,await i.confirm("Are you sure to reset your picture? Once its gone, its gone forever!")){try{await fetch(a.getServerURL()+"/account/picture/",{method:"POST",body:""}),f()}catch(e){i.alert("Error deleting profile picture.")}v.disabled=!1}},d.onchange=async function(){t=d.value,p.style.color=t,m.style.color=t,await fetch(a.getServerURL()+"/account/setcolor/",{method:"POST",body:JSON.stringify({color:d.value})})},u.onchange=async function(){p.style.fontFamily=u.value,m.style.fontFamily=u.value,await fetch(a.getServerURL()+"/account/setfont/",{method:"POST",body:JSON.stringify({font:u.value})})},u.value=e.font,h.onclick=async function(){p.focus()},p.style.cursor="pointer",p.onfocus=async function(){p.style.cursor="auto"},p.onblur=async function(){p.style.cursor="pointer"},p.onchange=async function(){p.disabled=!0;var e=p.value;if(!(await fetch(a.getServerURL()+"/account/displayname/",{method:"POST",body:JSON.stringify({displayName:e})})).ok)return i.alert("This name is too goofy or long, make it something shorter."),void(p.disabled=!1);p.value=e,p.disabled=!1},y.onclick=async function(){if(y.disabled=!0,await i.confirm("Change your password? Its no way back if you forget it!")){var e=await i.passwordPrompt("Type your old password, just to confirm its you.");if(!e)return void i.alert("Password change canceled, nothing has been changed.");var t=await i.passwordPrompt("Make a new password, make sure its unique to other sites you use.");if(!t)return void i.alert("Password change canceled, nothing has been changed.");var n=r.doLoadingScreen(),o=await fetch(a.getServerURL()+"/account/passwordchange/",{method:"POST",body:JSON.stringify({newPassword:t,oldPassword:e})});if(n.remove(),!o.ok)return void i.alert("Something went wrong while changing your password. Maybe try again?");i.alert("Password was changed! All other devices have been signed out until you change the password back again.")}y.disabled=!1};var w=o.getGPId("destroyAccountButton");w.onclick=async function(){w.setAttribute("disabled","");try{if(!await i.confirm("Deactivating your account will:\n- Make your account no longer accessible.\n- You or someone else can't sign up with the same username.\n- Rooms you own won't be deleted, they can still be accessed.\n- Your profile picture and some info would be deleted to save database space.\n- People that try to refrence your username would get an error.\nDeactivate your account now? You can't undo this action!"))return i.alert("Deactivation canceled."),void w.removeAttribute("disabled");var e=await i.passwordPrompt("To make sure its actually you, enter your password:");if(!e)return void i.alert("Deactivation canceled.");var t=await fetch(a.getServerURL()+"/account/destroy/",{method:"POST",body:JSON.stringify({password:e})});if(!t.ok)return void i.alert("Deactivation had an error. Error: "+(await t.json()).message);i.alert("Your account was successfully deactivated!"),window.location.href="/"}catch(e){console.error(e),i.alert("Error when trying to destroy account: "+e)}w.removeAttribute("disabled")}}else s=[{element:"div",className:"centeredDialog",style:{backgroundColor:"white",borderRadius:"5px",padding:"15px 15px",boxShadow:"0px 0px 20px black"},children:[n(7984),{element:"span",className:"headerText",textContent:"Oops!"},{element:"br"},{element:"span",textContent:"It doesn't seem like you're signed in, this might have been because your user information changed on another device or browser. You can sign in again to make this error go away."},{element:"br"},{element:"div",style:{display:"flex"},children:[{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signin?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign in"},{element:"div",style:{width:"3px"}},{element:"div",className:"button2",eventListeners:[{event:"click",func:function(){window.location.href="/signup?href="+encodeURIComponent(window.location.pathname+window.location.hash)}}],textContent:"Sign up"}]}]}],l=o.createElementsFromJSON(s),o.appendElements(o.body,l)}catch(b){i.alert(b)}}()}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,a,i)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,a,i]=e[d],s=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every(e=>o.O[e](n[l]))?n.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={930:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[r,s,l]=n,c=0;if(r.some(t=>0!==e[t])){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(l)var d=l(o)}for(t&&t(n);c<r.length;c++)i=r[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},n=self.webpackChunkrandomrants_plus=self.webpackChunkrandomrants_plus||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[804],()=>o(6562));a=o.O(a)})();